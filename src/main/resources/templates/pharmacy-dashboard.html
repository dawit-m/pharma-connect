<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Inventory Management | MedSignal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f4f7f6;
        font-family: "Segoe UI", sans-serif;
      }
      .sidebar {
        background: #2c3e50;
        min-height: 100vh;
        color: white;
        padding: 20px;
      }
      .sidebar a {
        color: #bdc3c7;
        text-decoration: none;
        display: block;
        padding: 10px;
      }
      .sidebar .active {
        background: #2ecc71;
        color: white;
        border-radius: 5px;
      }
      .main-content {
        padding: 30px;
      }
      .inventory-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      }
      .add-form-container {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        border-left: 5px solid #2ecc71;
        margin-bottom: 30px;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 sidebar">
          <h4 class="fw-bold text-success mb-4">ðŸŒ¿ MedSignal</h4>
          <a href="#" class="active">ðŸ“¦ Stock Inventory</a>
          <a th:href="@{/pharmacy/logout}" class="text-danger mt-5">Logout</a>
        </div>

        <div class="col-md-10 main-content">
          <h2 class="fw-bold mb-4">
            Pharmacy Portal:
            <span
              class="text-success"
              th:text="${session.loggedInPharmacy != null ? session.loggedInPharmacy.pharmacyName : 'Guest'}"
              >Kenema</span
            >
          </h2>

          <div class="add-form-container shadow-sm">
            <h5 class="fw-bold mb-3">Add New Medicine to Stock</h5>

            <form
              th:action="@{/pharmacy/add-medicine}"
              method="POST"
              class="row g-3"
            >
              <div class="col-md-3">
                <label class="small fw-bold">Medicine Name</label>
                <input
                  type="text"
                  name="name"
                  class="form-control"
                  placeholder="e.g. Paracetamol"
                  required
                />
              </div>
              <div class="col-md-2">
                <label class="small fw-bold">Price (ETB)</label>
                <input
                  type="number"
                  step="0.01"
                  name="price"
                  class="form-control"
                  placeholder="0.00"
                  required
                />
              </div>
              <div class="col-md-2">
                <label class="small fw-bold">Quantity</label>
                <input
                  type="number"
                  name="quantity"
                  class="form-control"
                  placeholder="100"
                  required
                />
              </div>
              <div class="col-md-3">
                <label class="small fw-bold">Expiry Date</label>
                <input
                  type="date"
                  name="expiryDate"
                  class="form-control"
                  required
                />
              </div>
              <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-success w-100 fw-bold">
                  Save Stock
                </button>
              </div>
            </form>
          </div>

          <div class="inventory-card">
            <h5 class="fw-bold mb-4">Current Stock Inventory</h5>
            <table class="table align-middle">
              <thead class="table-light">
                <tr>
                  <th>Medicine Name</th>
                  <th>Price</th>
                  <th>Stock Level</th>
                  <th>Expiry Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="med : ${medicines}">
                  <td class="fw-bold" th:text="${med.name}">Name</td>
                  <td th:text="${med.price + ' ETB'}">0.00</td>
                  <td>
                    <span
                      class="badge"
                      th:classappend="${med.quantity < 10} ? 'bg-danger' : 'bg-success'"
                      th:text="${med.quantity}"
                      >0</span
                    >
                  </td>
                  <td
                    th:text="${med.expiryDate != null ? #temporals.format(med.expiryDate, 'dd MMM, yyyy') : 'No Date'}"
                  >
                    Date
                  </td>
                  <td>
                    <a
                      th:href="@{/pharmacy/delete-medicine/{id}(id=${med.id})}"
                      class="btn btn-sm btn-outline-danger"
                      >Delete</a
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
